# 3GPP Traffic Influence Service

## Overview

The **Traffic Influence Service** implements the 3GPP northbound API for traffic influence capabilities, based on [3GPP TS 29.522](https://github.com/jdegre/5GC_APIs/blob/Rel-18/TS29522_TrafficInfluence.yaml). It allows application functions to provide traffic steering policies to the 5G Core Network.

## API Specification

Detailed API schema: [TS 29.522 Traffic Influence - OpenAPI Definition](https://github.com/jdegre/5GC_APIs/blob/Rel-18/TS29522_TrafficInfluence.yaml)

## Dependencies

- Policy Control Function (PCF) supporting the npcf_policy_authorization service.
- open-exposure libcapif library to interact with the open-exposure capif-service


## Configuration

Sample configuration:

```yaml
nbi:
  httpVersion: 1
  useTLS: no
  fqdn: 3gpp-traffic-influence
  port: 8080 

sbi:
  nrfSvc: http://nrf.corenetwork.org
  useNrf: no
  pcfSvc: http://pcf.corenetwork.org
  httpVersion: 2

supportedFeatures: 3fff # 12 for open5gs, 3fff for free5gs
capifSvc: http://capif-service:8080

```

## CAPIF Integration

- Uses `libcapif` library for communicating with capif service
- It register its own API to the Capif Core Function via the open-exposure capif service
- It supports logging and auditing functions via the libcapif integration
- It uses JWT token generated by the CAPIF Core Function to authorize API Invokers
- More info on the [capif-service](https://gitlab.eurecom.fr/open-exposure/nef/capif-service) gitlab repository

## Run Locally

``` bash
cd cmd/traffic-influence/
go run main.go -c <path_to_config_file>
```