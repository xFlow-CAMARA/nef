# 3GPP Application Session with QoS Service

## Overview

Implements the **3GPP Application Session with QoS** northbound interface as described in [3GPP TS 29.122](https://github.com/jdegre/5GC_APIs/blob/Rel-18/TS29122_AsSessionWithQoS.yaml). This API allows external applications to establish and manage sessions with requested QoS parameters.

## API Specification

Reference OpenAPI document:
[TS 29.122 AS Session with QoS - OpenAPI Definition](https://github.com/jdegre/5GC_APIs/blob/Rel-18/TS29122_AsSessionWithQoS.yaml)

## Dependencies

- Policy Control Function (PCF) supporting the npcf_policy_authorization service.
- open-exposure libcapif library to interact with the open-exposure capif-service

## Configuration
Sample configuration:

```yaml
nbi:
  httpVersion: 1
  useTLS: no
  fqdn: as-session-with-qos
  port: 8080

sbi:
  nrfSvc: http://nrf.corenetwork.org
  useNrf: no
  pcfSvc: http://pcf.corenetwork.org
  httpVersion: 2

capifSvc: http://capif-service:8080
supportedFeatures: 12
qosConfig: #define here the qos profile mapping
  qos1:
    marBwDl: 120000000
    marBwUl: 120000000
    mediaType: CONTROL
  qos2:
    marBwDl: 240000000
    marBwUl: 240000000
    mediaType: CONTROL
  qos3:
    marBwDl: 480000000
    marBwUl: 480000000
    mediaType: CONTROL
  qos4:
    marBwDl: 960000000
    marBwUl: 960000000
    mediaType: VIDEO
```

## CAPIF Integration

- Uses `libcapif` library for communicating with capif service
- It register its own API to the Capif Core Function via the open-exposure capif service
- It supports logging and auditing functions via the libcapif integration
- It uses JWT token generated by the CAPIF Core Function to authorize API Invokers
- More info on the [capif-service](https://gitlab.eurecom.fr/open-exposure/nef/capif-service) gitlab repository

## Run Locally

``` bash
cd cmd/as-session-with-qos/
go run main.go -c <path_to_config_file>
```